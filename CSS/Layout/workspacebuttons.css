/*
Workspace Buttons Styling
version 2026.01.19
Styles for custom workspace quick-switch buttons injected into tab-strip
See: https://vivaldi.com/blog/how-to/pawel-shows-you-how-to-play-with-workspaces-and-custom-icons-in-vivaldi/
*/

/* Vivaldi's native workspace button hover effect */
.toolbar-tabbar-after button.ToolbarButton-Button[title*="workspace"]:hover,
.toolbar-tabbar-after button.ToolbarButton-Button[title*="Workspace"]:hover {
  background: rgba(255, 255, 255, 0.1);
  border-radius: calc(var(--radius, 8px) * 0.7);
  transition: background var(--fast-animation-speed) ease;
}

/* Workspace button full width in sidebar */
.tabbar-workspace-button {
  width: 100% !important;
}

/* Workspace popup styling - default solid background */
/* z-index must be higher than pinned tabs (--z-pinned-expand: 100000000) */
.WorkspacePopup,
div[class*="WorkspacePopup"],
.vivaldi-popup:has(.WorkspacePopup-Items),
div[class*="Popup"]:has(.WorkspacePopup-Items) {
  position: relative;
  z-index: 2000000000 !important;
  background: var(--colorBg, #1e1e1e) !important;
  background-color: var(--colorBg, #1e1e1e) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  opacity: 1 !important;
}

/* When transparent tabbar is enabled, match transparency */
/* Use body.transparent-tabbar since popup may be at document root */
body.transparent-tabbar .WorkspacePopup,
body.transparent-tabbar div[class*="WorkspacePopup"],
body.transparent-tabbar .vivaldi-popup:has(.WorkspacePopup-Items),
body.transparent-tabbar div[class*="Popup"]:has(.WorkspacePopup-Items),
.transparent-tabbar .WorkspacePopup,
.transparent-tabbar div[class*="WorkspacePopup"] {
  z-index: 2000000000 !important;
  background: var(--colorBgAlpha, rgba(30, 30, 30, 0.85)) !important;
  background-color: var(--colorBgAlpha, rgba(30, 30, 30, 0.85)) !important;
  backdrop-filter: blur(16px) saturate(180%) !important;
  -webkit-backdrop-filter: blur(16px) saturate(180%) !important;
}

.WorkspacePopup > *,
div[class*="WorkspacePopup"] > * {
  background: transparent !important;
}

.WorkspacePopup-Items {
  -ms-overflow-style: none;
  scrollbar-width: none;
}

.WorkspacePopup-Items::-webkit-scrollbar {
  display: none;
}

/* Suppress pinned tab hover effects when workspace popup is open */
/* Force pinned tabs BELOW popup z-index when popup is visible */
body:has(.WorkspacePopup) #tabs-container .tab-strip .is-pinned,
body:has(.WorkspacePopup) #tabs-container .tab-strip .is-pinned .tab-wrapper,
body:has(.WorkspacePopup) #tabs-container .tab-strip .is-pinned .tab,
body:has(.WorkspacePopup-Items) #tabs-container .tab-strip .is-pinned,
body:has(.WorkspacePopup-Items) #tabs-container .tab-strip .is-pinned .tab-wrapper {
  z-index: 1 !important;
  pointer-events: none !important;
}

body:has(.WorkspacePopup) #tabs-container .tab-strip .is-pinned .tab-wrapper:hover,
body:has(.WorkspacePopup-Items) #tabs-container .tab-strip .is-pinned .tab-wrapper:hover {
  width: auto !important;
  min-height: auto !important;
  background-color: transparent !important;
  transform: none !important;
}

/* Suppress auto-hide toolbar items when workspace popup is open */
/* Must target ALL toolbar children and force them below popup */
body:has(.WorkspacePopup) .toolbar.toolbar-tabbar-before > *:not(.UrlBar-AddressField):not(.workspace-popup),
body:has(.WorkspacePopup-Items) .toolbar.toolbar-tabbar-before > *:not(.UrlBar-AddressField):not(.workspace-popup),
body:has(.WorkspacePopup) .toolbar.toolbar-tabbar-before .button-toolbar:not(.workspace-popup),
body:has(.WorkspacePopup-Items) .toolbar.toolbar-tabbar-before .button-toolbar:not(.workspace-popup) {
  opacity: 0 !important;
  pointer-events: none !important;
  z-index: 1 !important;
}

/* Also suppress the entire toolbar row z-index when popup is open */
body:has(.WorkspacePopup) .toolbar.toolbar-tabbar-before,
body:has(.WorkspacePopup-Items) .toolbar.toolbar-tabbar-before {
  z-index: 1 !important;
}
