/*
Zen Browser-Style Tabs
version 2026.02.02 - Sixth Pass
The Zen formula: inactive = invisible, active = visible
Visual hierarchy through CONTRAST, not addition
*/

/* ============================================ */
/* ACCORDION VIEW FIX                          */
/* Target ONLY accordion elements              */
/* DO NOT change the entire tab-strip layout!  */
/* ============================================ */

/* 
 * IMPORTANT: We must NOT use rules like:
 *   #tabs-container .tab-strip:has(.accordion-toggle-arrow) { display: flex... }
 * This breaks the grid layout for pinned tabs!
 * Instead, target ONLY the accordion elements specifically.
 */

/* Accordion toggle header - remove colored outline, constrain width */
.tab-position.accordion-toggle-arrow {
  max-width: 100% !important;
  overflow: hidden !important;
  box-sizing: border-box !important;
}

.tab-position.accordion-toggle-arrow .tab-wrapper {
  max-width: 100% !important;
  overflow: hidden !important;
  /* Center the content including arrow */
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
}

/* Remove colored borders/outlines from accordion header */
.tab-position.accordion-toggle-arrow,
.tab-position.accordion-toggle-arrow .tab,
.tab-position.accordion-toggle-arrow .tab-wrapper,
.tab-position.accordion-toggle-arrow .tab-header {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
}

/* Accordion children - remove colored outlines */
.tab-wrapper.accordion,
.tab-wrapper.in-accordion,
.tab-wrapper.extended.in-accordion {
  border: none !important;
  outline: none !important;
  box-shadow: none !important;
  max-width: 100% !important;
  overflow: hidden !important;
}

/* Tab positions containing accordion wrappers */
.tab-position:has(.tab-wrapper.accordion),
.tab-position:has(.tab-wrapper.in-accordion) {
  max-width: 100% !important;
  overflow: hidden !important;
}

/* Center the accordion arrow (it's typically an ::after pseudo-element) */
.tab-position.accordion-toggle-arrow .tab::after,
.tab-position.accordion-toggle-arrow .tab-wrapper::after {
  position: relative !important;
  left: auto !important;
  right: auto !important;
  margin-left: auto !important;
  margin-right: auto !important;
}

/* ============================================ */
/* INACTIVE TABS - Nearly Invisible            */
/* No background, muted text                   */
/* ============================================ */

/* Base tab - transparent, muted text */
.tab-position .tab-wrapper {
  background-color: transparent !important;
  border: none !important;
  border-radius: var(--zen-tab-radius, 8px) !important;
  transition: 
    background-color var(--fast-animation-speed, 140ms) ease-out,
    color var(--fast-animation-speed, 140ms) ease-out !important;
}

/* Inactive tab text - GREY/muted */
.tab-position .tab .title {
  color: var(--colorFg) !important;
  opacity: 0.6 !important;
  transition: opacity var(--fast-animation-speed, 140ms) ease-out !important;
}

/* Inactive favicon - slightly muted too */
.tab-position .tab .favicon {
  opacity: 0.7 !important;
  transition: opacity var(--fast-animation-speed, 140ms) ease-out !important;
}

/* ============================================ */
/* HOVER STATE - Subtle appearance             */
/* ============================================ */

/* Hover - slight background appears */
.tab-position .tab:hover .tab-wrapper {
  background-color: rgba(255, 255, 255, 0.06) !important;
}

/* Hover - text brightens */
.tab-position .tab:hover .title {
  opacity: 0.85 !important;
}

/* Hover - favicon brightens */
.tab-position .tab:hover .favicon {
  opacity: 0.9 !important;
}

/* ============================================ */
/* ACTIVE TAB - Visible & Clear                */
/* Subtle background, WHITE text               */
/* ============================================ */

/* Active - subtle rounded background fill */
.tab-position .tab.active .tab-wrapper {
  background-color: rgba(255, 255, 255, 0.1) !important;
}

/* Active - WHITE text (full brightness) */
.tab-position .tab.active .title {
  opacity: 1 !important;
  color: var(--colorFg) !important;
}

/* Active - favicon full brightness */
.tab-position .tab.active .favicon {
  opacity: 1 !important;
}

/* Active + hover - slightly brighter */
.tab-position .tab.active:hover .tab-wrapper {
  background-color: rgba(255, 255, 255, 0.12) !important;
}

/* ============================================ */
/* PINNED TABS (Grid) - Same Treatment         */
/* Apply same active styling to pinned tabs    */
/* ============================================ */

/* Pinned inactive - muted */
.tab-position.is-pinned .tab .title {
  opacity: 0.6 !important;
}

.tab-position.is-pinned .tab .favicon {
  opacity: 0.7 !important;
}

/* Pinned active - bright */
.tab-position.is-pinned .tab.active .title {
  opacity: 1 !important;
}

.tab-position.is-pinned .tab.active .favicon {
  opacity: 1 !important;
}

.tab-position.is-pinned .tab.active .tab-wrapper {
  background-color: rgba(255, 255, 255, 0.1) !important;
}

/* ============================================ */
/* CLOSE BUTTON - Hidden until hover           */
/* ============================================ */

.tab-position:not(.is-pinned) .tab .close {
  opacity: 0;
  width: 0;
  min-width: 0;
  padding: 0;
  margin: 0;
  overflow: hidden;
  transition: 
    opacity var(--fast-animation-speed, 140ms) ease-out,
    width var(--fast-animation-speed, 140ms) ease-out,
    margin var(--fast-animation-speed, 140ms) ease-out;
}

.tab-position:not(.is-pinned) .tab:hover .close {
  opacity: 0.5;
  width: 16px;
  min-width: 16px;
  margin-left: 4px;
}

.tab-position:not(.is-pinned) .tab:hover .close:hover {
  opacity: 1;
}

/* ============================================ */
/* CLEAN UP - Remove visual noise              */
/* ============================================ */

/* Remove any default borders/outlines */
.tab-position .tab,
.tab-position .tab-wrapper {
  outline: none !important;
  box-shadow: none !important;
}

/* Separator - very subtle */
#tabs-container .tab-strip .separator hr {
  opacity: 0.15 !important;
}

/* New tab button - muted like inactive tabs */
.newtab button {
  border-radius: var(--zen-tab-radius, 8px) !important;
  opacity: 0.5;
}

.newtab button:hover {
  opacity: 0.8;
  background-color: rgba(255, 255, 255, 0.06) !important;
}

/* ============================================ */
/* TAB STACKS - Remove cluttered outlines      */
/* Zen style: no colored borders               */
/* ============================================ */

/* Remove tab stack colored borders/outlines */
.tab-position .tab.color,
.tab-position .tab[style*="border"],
.tab-position .tab-wrapper[style*="border"] {
  border: none !important;
  outline: none !important;
}

/* Tab stack indicator - make it subtle */
.tab-position .tab .tab-group-indicator,
.tab-position .tab .stack-counter {
  border: none !important;
  background-color: rgba(255, 255, 255, 0.15) !important;
  border-radius: 6px !important;
}

/* Remove the colored left/right borders on stacked tabs */
.tab-position .tab-header {
  border-left: none !important;
  border-right: none !important;
}

/* Tab with custom color - keep bg but remove border */
.tab-position .tab[style*="background"] .tab-wrapper,
.tab-position .tab .tab-wrapper[style*="background"] {
  border: none !important;
  outline: none !important;
  /* Let the color show through but muted */
}

/* SVG tab selection indicator - hide harsh outlines */
.tab-position .svg-tab-selection {
  stroke: none !important;
  fill: none !important;
}

/* Remove any border from tab-header */
.tab-position .tab .tab-header {
  border: none !important;
  outline: none !important;
}
