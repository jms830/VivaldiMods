/*
Addressbar Styling
version 2026.02.02
MINIMAL VERSION - debugging clipping issue
*/

/* ============================================ */
/* THEME-AWARE GLASS VARIABLES                 */
/* ============================================ */

.theme-dark {
  --zen-url-bg: rgba(255, 255, 255, 0.03);
  --zen-url-bg-hover: rgba(255, 255, 255, 0.06);
  --zen-url-bg-focus: rgba(255, 255, 255, 0.08);
}

.theme-light {
  --zen-url-bg: rgba(0, 0, 0, 0.03);
  --zen-url-bg-hover: rgba(0, 0, 0, 0.06);
  --zen-url-bg-focus: rgba(0, 0, 0, 0.08);
}

/* ============================================ */
/* ZEN-STYLE URL BAR - MINIMAL                 */
/* Just visual styling, no layout changes      */
/* ============================================ */

.UrlBar-AddressField {
  border: none !important;
  border-radius: 8px !important;
  background-color: var(--zen-url-bg) !important;
  transition: background-color 0.15s ease;
  isolation: isolate !important;
  -webkit-font-smoothing: antialiased !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}

.UrlBar-AddressField:hover {
  background-color: var(--zen-url-bg-hover) !important;
}

.UrlBar-AddressField:focus-within {
  background-color: var(--zen-url-bg-focus) !important;
}

/* Override transparent tabbar backdrop-filter - causes text ghosting */
.transparent-tabbar .UrlBar-AddressField,
body.transparent-tabbar .UrlBar-AddressField,
.transparent-tabbar .auto-hide-wrapper .UrlBar-AddressField,
body.transparent-tabbar .auto-hide-wrapper .UrlBar-AddressField {
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  background-color: var(--colorBg) !important;
}

/* ============================================ */
/* ALLOW URL BAR TO OVERFLOW TABBAR            */
/* When focused, URL bar can extend beyond     */
/* the sidebar/tabbar container bounds         */
/* ============================================ */

/* Parent containers: allow overflow when URL bar is focused */
#tabs-tabbar-container:has(.UrlBar-AddressField:focus-within),
.toolbar-tabbar-before:has(.UrlBar-AddressField:focus-within),
.auto-hide-wrapper:has(.UrlBar-AddressField:focus-within) {
  overflow: visible !important;
}

/* URL bar gets higher z-index when focused to appear above everything */
.UrlBar-AddressField:focus-within {
  z-index: 9999 !important;
  position: relative !important;
}

.UrlBar-AddressField .UrlBar-UrlFieldWrapper,
.UrlBar-AddressField .UrlBar-UrlFieldWrapper > .observer {
  overflow: visible !important;
}

/* OmniDropdown styling - MUST be above all tab elements */
.OmniDropdown {
  position: relative !important;
  z-index: 2147483647 !important;
  border-radius: 8px !important;
  background-color: var(--colorBg) !important;
  border: 1px solid var(--colorBorder, rgba(255,255,255,0.1)) !important;
  box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4) !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
  isolation: isolate !important;
}

.OmniDropdown .search-engines-in-address-bar {
  background-color: var(--colorBg) !important;
  display: flex !important;
  gap: 4px !important;
  padding: 8px !important;
  border-bottom: 1px solid var(--colorBorder, rgba(255,255,255,0.1)) !important;
}

.OmniDropdown .search-engine-button {
  background: transparent !important;
  border: none !important;
  padding: 4px !important;
  border-radius: 4px !important;
}

.OmniDropdown .search-engine-button:hover {
  background: rgba(255,255,255,0.1) !important;
}

.OmniDropdown .OmniDropdown-Collection {
  background-color: var(--colorBg) !important;
  list-style: none !important;
  margin: 0 !important;
  padding: 4px 0 !important;
}

.OmniDropdown .OmniLinkItem {
  background-color: var(--colorBg) !important;
  display: flex !important;
  align-items: center !important;
  padding: 8px 12px !important;
  cursor: pointer !important;
}

.OmniDropdown .OmniLinkItem:hover,
.OmniDropdown .OmniLinkItem--Highlighted {
  background-color: rgba(255,255,255,0.08) !important;
}

.OmniDropdown .OmniLinkItem-DisplayText {
  flex: 1 !important;
  min-width: 0 !important;
  overflow: hidden !important;
  text-overflow: ellipsis !important;
  white-space: nowrap !important;
}

.OmniDropdown .OmniLinkItem-Badge {
  flex-shrink: 0 !important;
  margin-left: 8px !important;
  opacity: 0.6 !important;
  font-size: 0.85em !important;
}

/* Ensure tab-strip doesn't overlap URL bar when focused */
.UrlBar-AddressField:focus-within ~ #tabs-container,
.toolbar-tabbar-before:has(.UrlBar-AddressField:focus-within) ~ #tabs-container {
  z-index: 1 !important;
}

/* Suppress pinned tab z-index when URL bar dropdown is visible */
body:has(.OmniDropdown) #tabs-container .tab-strip .is-pinned .tab-wrapper {
  z-index: 1 !important;
}

/* ============================================ */
/* URL FRAGMENT COLORING                       */
/* ============================================ */

.UrlFragment-HostFragment-Basedomain,
.UrlFragment-HostFragment-TLD {
  color: var(--colorFg) !important;
}

.UrlFragment-HostFragment-Subdomain {
  color: var(--colorFgFaded) !important;
}

/* ============================================ */
/* HIDE CLUTTER                                */
/* ============================================ */

.UrlBar-UrlObfuscationWarning,
button.button-addressfield.SiteInfoButton,
.SiteInfoButton-SecurityBadge,
.BookmarkButton {
  display: none !important;
}
