/* AirZenify - Vivaldi Air v.24.3
 * Source: https://github.com/ELGUAPOLIFE/Zen-Theme-CSS-for-Vivaldi-Browser
 * 
 * Comprehensive blur/transparency theme with Zen-style auto-hiding header.
 * Includes: sidebar, tabs, workspace popup, status bar, bookmark bar,
 * speed dial, startpage navigation, panels, and more.
 *
 * NOTE: This mod may conflict with several existing mods in this repo:
 * - Layout/nativeautohidepolish.css (auto-hide styling)
 * - Layout/addressbar.css (address bar styling)
 * - Layout/workspacebuttons.css (workspace popup styling)
 * - AutoHide/* (various auto-hide mods)
 * 
 * When enabling this mod, consider disabling conflicting mods in core.css
 */

:root {
    --customRadius: 8px; /* NOT USING NOW */

    --bgDark: rgba(0, 0, 0, 0.22);
    --bgLight: rgba(255, 255, 255, 0.22);
    
    --bgDisabledDark: rgba(0, 0, 0, 0.11);
    --bgDisabledLight: rgba(255, 255, 255, 0.11);

    --blurLow: blur(4px);
    --blurMed: blur(6px);
    --blurMedHigh: blur(8px);
    --blurHigh: blur(12px);

    --hoverBlur: var(--blurMed);

    --anim-duration: 128ms;

    --space: 5px;

}

/* Transparent */
/*
.theme-dark {
    --bg: transparent; 
    --bgDisabled: var(--bgDisabledDark);
}
.theme-light {
    --bg: transparent; 
    --bgDisabled: var(--bgDisabledLight);
}
*/

/* Turn on to set theme-aware overlay, automatically changes overlay based on theme */

.theme-dark {
    --bg: var(--bgDark); 
    --bgDisabled: var(--bgDisabledDark);
}
.theme-light {
    --bg: var(--bgLight); 
    --bgDisabled: var(--bgDisabledLight);
}


/* Turn on For Light theme overlay */

/*
.theme-dark {
    --bg: var(--bgLight); 
    --bgDisabled: var(--bgDisabledLight);
}
.theme-light {
    --bg: var(--bgLight); 
    --bgDisabled: var(--bgDisabledLight);
}
*/

/* Turn on For Dark theme overlay */

/*
.theme-dark {
    --bg: var(--bgDark); 
    --bgDisabled: var(--bgDisabledDark);
}
.theme-light {
    --bg: var(--bgDark); 
    --bgDisabled: var(--bgDisabledDark);
}
*/

/* Turn it on if you do not want ZEN style*/

/* MAINBAR */

/*
#browser.win.address-top .toolbar-mainbar:has(.window-buttongroup.on-mainbar),
#browser.linux.address-top .toolbar-mainbar:has(.window-buttongroup.on-mainbar) {
    min-height: calc(38px / var(--uiZoomLevel));
}
*/
.density-on .UrlBar-SearchField, 
.density-on .UrlBar-AddressField {
    height: 40px;               /* make it 32px if you do not want zen style */
}

/* Turn it on if you do not want ZEN style*/

/*
.disable-titlebar#browser.win .window-buttongroup {
    height: 38px;
}

#browser.win .window-buttongroup button.window-close {
    border-top-right-radius: var(--radius);
    border-bottom-right-radius: var(--radius); 
}

.mainbar {
    background-color: var(--bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    margin: 0px;               
    border-radius: var(--radius);
}

.address-top .mainbar { border-bottom: none; }

.mainbar button:hover,
#browser:not(.tabs-top) .vivaldi:hover, 
#browser:not(.tabs-top) .vivaldi:focus-visible,
.theme-dark#browser.win .window-buttongroup button:hover {
    background-color: var(--bg);
    backdrop-filter: var(--blurMed);
}

.disable-titlebar.address-top#browser:not(.tabs-top) .vivaldi {
    margin: 0 4px;
}

.SearchField, .UrlBar-AddressField {
    border: none !important;
    background-color: transparent;
}

.SearchField:hover, .UrlBar-AddressField:hover,
.color-behind-tabs-on .SearchField:focus-within, 
.color-behind-tabs-on .MailSearchField-Inner:focus-within, 
.color-behind-tabs-on .UrlBar-AddressField:focus-within {
    background-color: var(--bg);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

.UrlFragment-Wrapper--ShouldHighlight {
    --HighlightColor: var(--colorFg);
    --LowlightColor: var(--colorFg);
}
*/

/* SIDEBAR */

#panels-container {
    margin-bottom: /*4px*/ 5px;
    background-color: var(--bg);
    border-radius: var(--radius);
    min-width: 40px;
    position: relative;
    transition: 
        width var(--anim-duration), 
        margin-left var(--anim-duration) ease-out, 
        min-width var(--anim-duration) !important;
}

/* Create backdrop blur with pseudo-element */
#panels-container::before {
    content: '';
    position: absolute;
    inset: 0;
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    border-radius: var(--radius);
    pointer-events: none;
    z-index: -1;
}

#panels-container.overlay:not(.icons) .panel-group {
    background-color: var(--bg) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-radius: var(--radius);
	margin-left: /*4px*/5px;
	margin-right: /*4px;*/5px;
}

#panels-container.left { margin-left: /*4px*/ 5px; }  
#panels-container.right { margin-right: /*4px*/ 5px; }  


/* Fix Side Panel margin when Auto-hide UI is on */
.auto-hide
#panels-container.left { margin-left: 0px; }  
.auto-hide
#panels-container.right { margin-right: 0px; }  

#panels-container #switch { padding-bottom: 5px; min-width: 41px; }



#panels-container.switcher {
    width: 0;
    min-width: 0;
    margin-left: 0;
    margin-right: 0;
    overflow: hidden;
}

/* doesnt disappear on collapse transition */
#panels-container.switcher #switch {
    visibility: none !important; 
}

#panels {
    padding-bottom: 5px;
}

#panels .webpanel-stack .webpanel .webpanel-content {
    margin: /*4px*/ 5px;
    margin-bottom: 0;
    border-radius: var(--radius);
}

#panels .webpanel-stack .webpanel .webpanel-header {
    box-shadow: none !important;
    padding-bottom: 0;
}

/* basic components */
#panels input,
#panels label:not(div.tree-row > label):not(.disabled),
#panels textarea {
    background-color: var(--bg);
    border-radius: var(--radius);
    border: none;
    box-shadow: none;
}

#panels .sortselector {
    border: none !important;
    background-color: var(--bg);
}

#panels .sortselector-button {
    background-color: none !important;
    height: calc(var(--treeViewRowHeight) - 2px);
}

#panels #window-panel .vivaldi-tree .tree-row {
    background-color: var(--bg) !important;
}

.panel-group .button-toolbar > button {
    background-color: var(--bg) !important;
    background-image: none !important;
    border: none !important;
}
.panel-group .button-toolbar > button:disabled {
    background-color: var(--bgDisabled) !important;
}

/* New note textbox */
.NotesEditor-Editor-Background:after { visibility: hidden; }
.NotesEditor-EmptyPlaceholder:hover {
    background-color: var(--bg);
    outline: none;
    border-radius: var(--radius);
}

#panels-container.overlay .panel-group,
.ExtensionToggleIcon.ExtensionToggleIcon--Expanded,
.ExtensionIcon--Hidden { background-color: transparent; }

#panels-container button:hover,
.ExtensionIcon--Hidden:hover, 
.ExtensionIcon--Hidden:active,
.toolbar-panel > .button-toolbar > button.button-pressed, 
.toolbar-panel .toolbar-extensions .button-toolbar > button.button-pressed, 
.toolbar-panel .page-zoom-controls .button-toolbar > button.button-pressed,
.density-on #switch .addwebpanel-wrapper > button.active button, 
.density-on #switch > .button-toolbar.active button, 
.density-on #switch > * > .button-toolbar.active button, 
.density-on #switch > button.active button {
    background-color: var(--bg);
    backdrop-filter: var(--blurMed);
}

/* STATUS BAR
   NOTE: Only set APPEARANCE here (blur, color, radius).
   Never set LAYOUT (margin, position, width, height) â€” those belong
   to AutoHide/statusbar.css or Vivaldi defaults. */
footer#footer {
    background: none !important;
    border-top: none !important;
}

footer .toolbar-statusbar {
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    background-color: var(--bg);
    border-radius: var(--radius);
}

.inner > .StatusInfo > .StatusInfo-Content {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurLow) !important;
    -webkit-backdrop-filter: var(--blurLow) !important;
    border-radius: var(--radius) !important;
    padding-bottom: 5px !important;
    margin: 0 5px 4px 5px !important;
    border: none !important;
}

/* ====================== */
/* UNIVERSAL WORKSPACES   */
/* ====================== */

/* Workspace buttons on tabbar (all positions) */
#tabs-tabbar-container .toolbar:not(.toolbar-small) > .button-toolbar,
#tabs-tabbar-container .toolbar:not(.toolbar-small) > div > .button-toolbar {
    color: var(--colorFg) !important;
    background: transparent !important;
}

/* Hover / active workspace button */
#tabs-tabbar-container .toolbar:not(.toolbar-small) > .button-toolbar > button:active,
#tabs-tabbar-container .toolbar:not(.toolbar-small) > div > .button-toolbar > button:active,
#tabs-tabbar-container .toolbar:not(.toolbar-small) > .button-toolbar:not(.toolbar-spacer, .toolbar-spacer-flexible) > button:not([disabled]):hover,
#tabs-tabbar-container .toolbar:not(.toolbar-small) > div > .button-toolbar:not(.toolbar-spacer, .toolbar-spacer-flexible) > button:not([disabled]):hover {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurMed) !important;
    -webkit-backdrop-filter: var(--blurMed) !important;
    border-radius: var(--radius);
}

/* Workspace popup container */
.button-popup.WorkspacePopup {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurHigh) !important;
    -webkit-backdrop-filter: var(--blurHigh) !important;
    border-radius: var(--radius);
    width: 194px;
    box-shadow: 0 2px 8px rgba(0,0,0,0.3);
}

/* Workspace list items */
.WorkspacePopup-Items .workspace-item-wrapper,
.WorkspacePopup-Items .this-window {
    background-color: transparent !important;
    border-radius: var(--radius);
    margin-bottom: 3px;
    transition: background-color var(--anim-duration) ease;
}

/* Hover effect */
.WorkspacePopup-Items .workspace-item-wrapper:hover,
.WorkspacePopup-Items .this-window:hover {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurLow) !important;
    -webkit-backdrop-filter: var(--blurLow) !important;
}

/* Tab counter */
.WorkspacePopup-Items .workspace-item-wrapper .title .tab-count,
.WorkspacePopup-Items .this-window .title .tab-count {
    color: var(--colorFg) !important;
    font-weight: 500;
}

/* Popup padding adjustments */
.WorkspacePopup-Items { padding: 5px 5px 0 !important; }
.WorkspacePopup .actions { padding: 0px 5px 5px !important; }
.WorkspacePopup-Items hr { margin: 5px 0 1px !important; }

/* Remove default arrow from popup */
.button-popup-right.button-popup-arrow-dark:before,
.button-popup-arrow-light:before { border-bottom-color: transparent !important; }

/* Page tiling popup (consistent style) */
.button-popup.ToolbarButtonPopup-DefaultStyles {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurMed) !important;
    -webkit-backdrop-filter: var(--blurMed) !important;
    border-radius: var(--radius);
}
.button-popup.ToolbarButtonPopup-DefaultStyles h2 {
    background: transparent !important;
    border-bottom: none !important;
}


/* TABS */



#browser .tabbar-wrapper, #browser.tabs-top #header { 
    background-color: transparent; 
}

#browser:not(.transparent-tabbar) #tabs-tabbar-container {
    background-color: var(--bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    /*margin: 4px 4px 0 4px;*/ margin: 5px 5px 0px 5px;
    border-radius: var(--radius);
    height: 30px;
}

/* Fix Tab bar margin when Auto-hide UI is on */

.auto-hide
#browser:not(.transparent-tabbar) #tabs-tabbar-container {
    margin: 0px 0px 0 0px;
}

/* Turn it on if you do not want ZEN style*/
/*
#titlebar {
    position: absolute;
    width: 100%;
    left: 4px;
    top: 4px;
    right: 0px;
    pointer-events: none;
}
*/

#browser.win .window-buttongroup {
    position: absolute;
    right: 10px;
    top: 0;
    overflow: hidden;
    line-height: initial;
}

/* Turn it on if you want Tab background blur - active and inactive tabs */
/*
#browser.color-behind-tabs-on .tab.active.active,
#browser .tab-position.colored .tab.active,
#browser .tab-position.colored .tab:not(.active),
#browser .tab-position.colored.accordion-toggle-arrow {
    background-color: var(--bg);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}
*/

/* hover states */
/*
#tabs-container .tab:not(.tab-group,.tab.active):hover,
#browser .tab-position.colored.accordion-toggle-arrow:hover, 
#browser .tab-position.colored .tab:not(.active):hover {
    background-color: var(--bg);
    backdrop-filter:  var(--blurMed);
}
*/

.tab.active .favicon { filter: none !important; }

#browser .tab-position.colored .stack-counter {
    background-color: var(--colorHighlightBg);
}

/* ======================= */
/* Fullscreen gap killer   */
/* ======================= */
#browser.fullscreen,
#browser.fullscreen body,
#browser.fullscreen #header,
#browser.fullscreen #titlebar,
#browser.fullscreen #tabs-container,
#browser.fullscreen #tabs-tabbar-container,
#browser.fullscreen .mainbar,
#browser.fullscreen .bookmark-bar,
#browser.fullscreen #webpage-stack {
    margin: 0 !important;
    padding: 0 !important;
    top: 0 !important;
    min-height: 0 !important;
    height: auto !important;
    border: none !important;
}


/* SPEED DIAL */
.SpeedDial--Thumbnail {
    background-color: var(--bg);
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    box-shadow: none;
}

/* CTRL+F */
.find-in-page-wrapper {
    background-color: var(--bg);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
}

/*Turn it on if you want Transparent active tab background */
/*
.tab.active {
    background-color: var(--bg) !important;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    transition: background-color var(--animation-speed, 260ms) ease;
}
*/
.tab.active::after { background: transparent !important; }

/* BOOKMARK BAR */
.bookmark-bar {
    background-color: var(--bg) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-radius: var(--radius);
    margin: 4px;
    padding: 4px 8px;
    min-height: 30px !important;
    display: flex !important;
    align-items: center !important;
}

.bookmark-bar .observer { background: transparent !important; }

.bookmark-bar button,
.bookmark-bar .button-toolbar > button,
.bookmark-bar .bookmark-item,
.bookmark-bar .bookmarkbar-item,
.bookmark-bar .toolbar > .button-toolbar > button {
    background-color: transparent !important;
    color: var(--colorFg) !important;
    border: none !important;
    border-radius: var(--radius);
    height: 30px !important;
    line-height: 30px !important;
    padding: 0 8px !important;
    display: inline-flex !important;
    align-items: center !important;
    transition: background-color var(--animation-speed, 260ms) ease, backdrop-filter var(--animation-speed, 260ms) ease, color var(--animation-speed, 260ms) ease;
}

.bookmark-bar .button-title,
.bookmark-bar .title,
.bookmark-bar .bookmark-label { color: var(--colorFg) !important; }

.bookmark-bar button:hover,
.bookmark-bar .button-toolbar > button:hover,
.bookmark-bar .bookmark-item:hover,
.bookmark-bar .bookmarkbar-item:hover {
    background-color: var(--bg) !important;
    backdrop-filter: blur(calc(var(--blurStrength) * 0.5));
    -webkit-backdrop-filter: blur(calc(var(--blurStrength) * 0.5));
}

.bookmark-bar button:active,
.bookmark-bar .button-toolbar > button:active,
.bookmark-bar .bookmark-item:active,
.bookmark-bar .bookmarkbar-item:active,
.bookmark-bar .button-toolbar > button[aria-pressed="true"] {
    background-color: var(--bg) !important;
    backdrop-filter: blur(calc(var(--blurStrength) * 0.7));
    -webkit-backdrop-filter: blur(calc(var(--blurStrength) * 0.7));
}

.bookmark-bar .separator {
    opacity: 0.5;
    border-right: 1px solid color-mix(in srgb, var(--colorFg), transparent 60%) !important;
}

/* ========================================================= */
/* SPEED DIAL SEARCH BAR (blurred idle + consistent roundness) */
/* ========================================================= */

/* Idle blurred */
.startpage .SearchField:not(:hover):not(:focus-within),
.StartPage .SearchField:not(:hover):not(:focus-within),
.SpeedDial .SearchField:not(:hover):not(:focus-within),
.SpeedDialView .SearchField:not(:hover):not(:focus-within) {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurMed) !important;
    -webkit-backdrop-filter: var(--blurMed) !important;
    border-radius: var(--radius) !important;
    box-shadow: none !important;
    transition: background-color var(--fast-animation-speed, 140ms) ease, backdrop-filter var(--fast-animation-speed, 140ms) ease;
}

/* Stronger blur when hovered/focused */
.startpage .SearchField:hover,
.startpage .SearchField:focus-within,
.StartPage .SearchField:hover,
.StartPage .SearchField:focus-within,
.SpeedDial .SearchField:hover,
.SpeedDial .SearchField:focus-within,
.SpeedDialView .SearchField:hover,
.SpeedDialView .SearchField:focus-within {
    background-color: var(--bg) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-radius: var(--radius) !important; /* keep corners consistent */
}

/* Inner input transparency */
.startpage .SearchField input,
.StartPage .SearchField input,
.SpeedDial .SearchField input,
.SpeedDialView .SearchField input {
    background: transparent !important;
    color: inherit !important;
    border-radius: var(--radius) !important;
}
.mainbar,
.bookmark-bar {
    z-index: var(--z-hover); /* keep reasonable */
}

/* ========================================================= */
/* STARTPAGE NAVIGATION - THEME AWARE BLUR & BUTTON STYLING */
/* ========================================================= */

/* Config variables */
:root {
    --startpageNavBtnPrimary: var(--colorFg);
    --startpageNavBtnSecondary: var(--colorFg);
    --startpageNavBtnInactive: transparent;
    --startpageNavBtnRounding: 14px;
    --startpageNavBtnHeight: 23px;
    --startpageNavBtnMargin: 10px;
    --startpageNavPaddingOnTop: 10px;       /* Vertical spacing */
    --startpageNavPaddingOnBottom: 10px;    /* Vertical spacing */
    --startpageNavTextShadow: 0 0 2px var(--startpageNavBtnSecondary), 0 0 3px var(--startpageNavBtnSecondary), 0 0 5px var(--startpageNavBtnSecondary);
    --startpageNavIconShadow: drop-shadow(0 0 4px var(--startpageNavBtnSecondary));

    /* Adaptive blur strength */
    --startpageNavBlur: 6px;        /* default blur for nav bar */
    --startpageNavBlurStrong: 12px; /* blur for active/hover buttons */
}

/* Startpage Nav Bar container */
.startpage .startpage-navigation {
    background-color: var(--bg);
    backdrop-filter: blur(var(--startpageNavBlur));
    -webkit-backdrop-filter: blur(var(--startpageNavBlur));
    box-shadow: unset;
    padding-top: var(--startpageNavPaddingOnTop);
    padding-bottom: calc(var(--startpageNavPaddingOnBottom) - 2px);
    min-height: unset;
    display: flex;
    justify-content: center;
    border-radius: var(--customRadius);
}

/* Folder nav buttons background */
.startpage .startpage-folder-navigation button {
    background-color: unset;
}

/* Startpage Nav Bar buttons */
.startpage .startpage-navigation .button-startpage,
.startpage .startpage-folder-navigation .button-startpage {
    display: flex;
    align-items: center;
    justify-content: center;
    height: var(--startpageNavBtnHeight);
    border-radius: var(--startpageNavBtnRounding) !important;
    border: 1.2px solid var(--startpageNavBtnPrimary);
    background-color: var(--startpageNavBtnInactive);
    color: var(--startpageNavBtnPrimary);
    margin: 0 var(--startpageNavBtnMargin) !important;
    text-shadow: var(--startpageNavTextShadow);
    box-shadow: 0 0 2px 1px rgba(0, 0, 0, 0.2);
    transition: var(--animation-speed, 260ms) ease;
    font-size: 11px;
    font-weight: 500;
}

/* Hover / active states with stronger blur */
.startpage .startpage-navigation .button-startpage.active,
.startpage .startpage-navigation .button-startpage:hover,
.startpage .startpage-folder-navigation .button-startpage:hover {
    color: var(--startpageNavBtnSecondary);
    background-color: var(--startpageNavBtnPrimary);
    text-shadow: 0 0 0.5px var(--startpageNavBtnSecondary);
    backdrop-filter: blur(var(--startpageNavBlurStrong));
    -webkit-backdrop-filter: blur(var(--startpageNavBlurStrong));
}

/* Icons styling */
.startpage .startpage-navigation .button-startpage svg,
.startpage .startpage-folder-navigation .button-startpage svg {
    color: var(--startpageNavBtnPrimary);
    filter: var(--startpageNavIconShadow);
    width: auto;
    height: 2.1em;
}

/* Hover / active icons */
.startpage .startpage-navigation .button-startpage.active svg,
.startpage .startpage-navigation .button-startpage:hover svg,
.startpage .startpage-folder-navigation .button-startpage:hover svg {
    color: var(--startpageNavBtnSecondary);
    filter: unset;
}

/* Folder back button adjustments */
button.button-startpage.up-level svg {
    position: unset;
    margin: 0 4px;
}
button.button-startpage.up-level span { display: flex; }
.button-startpage.up-level { padding: 0 14px 0 6px; }

/* Center folder navigation */
.startpage .startpage-folder-navigation {
    display: flex;
    align-items: center;
    justify-content: center;
}

/* Startpage widgets */
.Dashboard-Widgets .dashboard-widget {
    background-color: var(--bg);
    backdrop-filter: blur(12px) !important;
}

/* Remove borders & extra styling */
.startpage .startpage-navigation .startpage-navigation-group:last-of-type { border: unset; }
button.button-startpage:after { content: unset; }

/* ========================================================= */
/* ADD / PLUS BUTTON FIXES */
/* ========================================================= */
.startpage .startpage-navigation .button-startpage.add-set {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0 !important;                  /* remove extra padding */
    min-width: 27px;                         /* small width */
    height: var(--startpageNavBtnHeight);    /* match other buttons */
    border-radius: var(--startpageNavBtnRounding) !important;
    background-color: var(--startpageNavBtnInactive);
    border: 1.2px solid var(--startpageNavBtnPrimary);
    margin: 0 var(--startpageNavBtnMargin) !important;
    text-shadow: var(--startpageNavTextShadow);
    box-shadow: 0 0 2px 1px rgba(0,0,0,0.2);
    transition: var(--animation-speed, 260ms) ease;
}

/* Center the SVG inside the add button */
.startpage .startpage-navigation .button-startpage.add-set svg {
    height: 16px;
    width: 16px;
    margin: 0;
    display: block;
}

/* Hover / active for add button */
.startpage .startpage-navigation .button-startpage.add-set:hover,
.startpage .startpage-navigation .button-startpage.add-set.active {
    background-color: var(--startpageNavBtnPrimary);
    color: var(--startpageNavBtnSecondary);
    backdrop-filter: blur(var(--startpageNavBlurStrong));
    -webkit-backdrop-filter: blur(var(--startpageNavBlurStrong));
}

.startpage .startpage-navigation .button-startpage.add-set:hover svg path,
.startpage .startpage-navigation .button-startpage.add-set.active svg path {
    fill: var(--startpageNavBtnSecondary);
}

/* Add folder button tweaks (keep min width for alignment) */
.startpage .startpage-navigation .button-startpage.add-set {
    padding-left: 1px;
    padding-right: 1px;
}

/* Speed dial items spacing fix */
.speeddial { margin-top: 0; padding-top: 2px; }

/* Search bar spacing fix */
.sdwrapper .iconmenu-container.searchfield { margin: 0px auto 25px; }

/* Notes icon scale */
.startpage .startpage-navigation .button-startpage[data-id="notes"] svg { transform: scale(1.45); }

/* ========================================================= */
/* END STARTPAGE NAVIGATION */
/* ========================================================= */

/* =========================
   TWO-LEVEL TAB STACK: SUB-ROW
   ========================= */

/* Cover multiple builds/selectors for the sub strip */
#tabs-subcontainer,                                           /* common ID for sub-row */
#tabs-tabbar-container [aria-label="Tab Stack Toolbar"],      /* ARIA label on newer builds */
#tabs-tabbar-container .tabbar-wrapper + .tabbar-wrapper,     /* sub-row is injected as next wrapper */
#tabs-tabbar-container .tabbar-wrapper:has(.tab.is-sub),      /* fallback via :has */
#tabs-tabbar-container .tabbar-subcontainer {                 /* some snapshots used this class */
    background: var(--bg) !important;
    background-image: none !important;       /* defeat Colored Tab Stacks paint */
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-radius: var(--radius);
    margin: 3px 5px 3px 5px;                    /* matches outer tab bar rounding */
}

/* Make tabs inside the sub-row look like normal tabs */
#tabs-subcontainer .tab,
#tabs-tabbar-container [aria-label="Tab Stack Toolbar"] .tab,
#tabs-tabbar-container .tabbar-wrapper + .tabbar-wrapper .tab,
#tabs-tabbar-container .tabbar-subcontainer .tab {
    background: transparent !important;      /* let row's blur show through */
}

#tabs-subcontainer .tab:not(.active):hover,
#tabs-tabbar-container [aria-label="Tab Stack Toolbar"] .tab:not(.active):hover,
#tabs-tabbar-container .tabbar-wrapper + .tabbar-wrapper .tab:not(.active):hover,
#tabs-tabbar-container .tabbar-subcontainer .tab:not(.active):hover {
    background: var(--bg) !important;
    backdrop-filter: var(--blurMed) !important;
    -webkit-backdrop-filter: var(--blurMed) !important;
}

/* Add padding inside parent tabbar */
#tabs-tabbar-container {
    padding-bottom: 6px !important;
}

/* Apply padding to the outer tabbar container when tabs are bottom */
#browser.tabs-bottom #tabs-tabbar-container {
    padding-top: 6px !important;
}

/* Bottom tabbar styling */
#browser.tabs-bottom:not(.transparent-tabbar) #tabs-tabbar-container {
    /*margin: 0 5px 5px 5px !important;*/ margin: 0 5px 5px 5px; /* adjust spacing for bottom */
    border-radius: var(--radius) !important;
}

/* Remove the solid background behind the bottom bar */
#browser.tabs-bottom #footer {
    background: transparent !important;
}

/* add padding to bottom tabs when using tab stack */
#browser.tabs-bottom #tabs-tabbar-container {
    padding-bottom: 10px !important; /* default 5px + 5px extra gap */
}

/* ======================== */
/* FIX vertical tabs margin */
/* ======================== */

/* Left side */
.tabs-left #tabs-tabbar-container {
    margin-bottom: /*4px*/ 7px !important;
	margin-right: 0px !important;
    margin-top: 0px !important;
}

/* Left side (Fixed Bottom spacing of Tab Bar when Auto-hide UI is on) */
.auto-hide
.tabs-left #tabs-tabbar-container {
    margin-bottom: 0px !important;
	margin-right: 0px !important;
    margin-top: 0px !important;
}

/* Right side: use container instead */
.tabs-right #tabs-tabbar-container {
    margin-bottom: /*4px*/ 7px !important;
	margin-left: 0px !important;
	margin-top: 0px !important;
}

/* Right side: use container instead (Fixed Bottom spacing of Tab Bar when Auto-hide UI is on) */
.auto-hide
.tabs-right #tabs-tabbar-container {
    margin-bottom: 0px !important;
	margin-left: 0px !important;
	margin-top: 0px !important;
}

/* ============================================= */
/* Fix missing margin between bottom and sidebar */
/* ============================================= */

#browser #panels-container.left,
#browser #panels-container.right {
    margin-bottom: /*4px*/ 5px !important;
}

/* Collapse header/titlebar completely when tabs are hidden
   BUT keep it in popup/settings windows */
   
#browser.tabs-off #tabs-tabbar-container,
#browser.tabs-off #header {
    margin: 0 !important;
    padding: 0 !important;
}

/* ======================= */
/* Horizontal Menu Styling */
/* ======================= */

/* Make sure header/titlebar don't override */
#browser #header,
#browser #titlebar {
    background: transparent !important;
    box-shadow: none !important;
}

.menubar {
    background-color: var(--bg) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border-radius: var(--radius) !important;
    margin: /*4px*/ 5px;
    height: 28px !important; 
    display: flex;
    align-items: center;
}

/* Menu items */
.menubar > .menuitem {
    color: var(--colorFg) !important;
    background: transparent !important;
    border-radius: var(--radius);
    padding: 0 10px !important;
    transition: background-color var(--animation-speed, 260ms) ease, backdrop-filter var(--animation-speed, 260ms) ease;
}

/* Hover */
.menubar > .menuitem:hover {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurMed) !important;
}

/* Active / pressed state */
.menubar > .menuitem:active,
.menubar > .menuitem[open] {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurMedHigh) !important;
}

/* ============================ */
/* FIX History panel tree items */
/* ============================ */

#history-panel .vivaldi-tree .tree-row {
    background-color: transparent !important; /* Semi-transparent bg */
    backdrop-filter: var(--blurMed) !important; /* Apply blur for glass effect */
    -webkit-backdrop-filter: var(--blurMed) !important;
    transition: backdrop-filter var(--anim-duration) ease, background-color var(--anim-duration) ease;
}

/* === Fix: Bookmark bar to appear below the suggestions === */
.bookmark-bar {
    z-index: var(--z-base) !important;
}

/* =============================*/
/* Fix window buttons alignment */
/* ===========================]*/
#browser.win.tabs-left .window-buttongroup,
#browser.win.tabs-right .window-buttongroup,
#browser.win.tabs-off .window-buttongroup {
    right: 0px !important;
    margin-right: 0px !important;
}

/* ========================= */
/* FIX: Colored Tab Groups   */
/* ========================= */

/* Group title / text color */
#browser .tab-position.colored .tab-group-indicator,
#browser .tab-position.colored .tabbar-group-title {
    color: var(--colorFg) !important;
}

/* === Stack counter fix for both light & dark themes === */
#browser .tab-position.colored .stack-counter {
    background-color: var(--colorHighlightBg) !important; 
    color: var(--colorHighlightFg) !important; 
    font-weight: 600;
    border-radius: 10px;
    padding: 0 6px;
    min-width: 16px;
    text-align: center;
}

/* Ensure inactive tab group text stays theme-aware */
#browser .tab-position.colored .tab:not(.active) .tab-header {
    color: var(--colorFg) !important;
}

/* ---------------------------
   Fix: Address Bar inside Tab Bar (Vivaldi 7.6)
   --------------------------- */

/* Turn it on if you don't want blurred Address & Search fields inside tab bar */
/*
#tabs-tabbar-container .UrlBar .UrlBar-AddressField,
#tabs-tabbar-container .UrlBar .SearchField,
#tabs-tabbar-container .toolbar-mainbar .UrlBar-AddressField,
#tabs-tabbar-container .toolbar-mainbar .SearchField,
.tabbar-wrapper .UrlBar-AddressField,
.tabbar-wrapper .SearchField {
    background-color: var(--bg) !important;
    border: none !important;
    box-shadow: none !important;
    border-radius: var(--radius) !important;
}
*/

/* Turn it off if you don't want blurred Address & Search fields inside tab bar */
/* Tab Bar Url and Search field's Idle blurred ,works only on Transparent Tab Bar*/

#tabs-tabbar-container .UrlBar .UrlBar-AddressField:not(:hover):not(:focus-within),
#tabs-tabbar-container .UrlBar .SearchField:not(:hover):not(:focus-within),
#tabs-tabbar-container .toolbar-mainbar .UrlBar-AddressField:not(:hover):not(:focus-within),
#tabs-tabbar-container .toolbar-mainbar .SearchField:not(:hover):not(:focus-within),
.tabbar-wrapper .UrlBar-AddressField:not(:hover):not(:focus-within),
.tabbar-wrapper .SearchField:not(:hover):not(:focus-within) {
    background-color: var(--bg) !important;
    backdrop-filter: var(--blurMed) !important;
    -webkit-backdrop-filter: var(--blurMed) !important;
    border-radius: var(--radius) !important;
    box-shadow: none !important;
    transition: background-color var(--fast-animation-speed, 140ms) ease, backdrop-filter var(--fast-animation-speed, 140ms) ease;
    border: none !important;
}

/* Turn it on if you don't want blurred Address & Search fields inside tab bar */
/* Tab Bar Url and Search field's Stronger blur when hovered/focused,works only on Transparent Tab Bar */
#tabs-tabbar-container .UrlBar .UrlBar-AddressField:hover,
#tabs-tabbar-container .UrlBar .UrlBar-AddressField:focus-within,
#tabs-tabbar-container .UrlBar .SearchField:hover,
#tabs-tabbar-container .UrlBar .SearchField:focus-within,
#tabs-tabbar-container .toolbar-mainbar .UrlBar-AddressField:hover,
#tabs-tabbar-container .toolbar-mainbar .UrlBar-AddressField:focus-within,
#tabs-tabbar-container .toolbar-mainbar .SearchField:hover,
#tabs-tabbar-container .toolbar-mainbar .SearchField:focus-within,
.tabbar-wrapper .UrlBar-AddressField:hover,
.tabbar-wrapper .UrlBar-AddressField:focus-within,
.tabbar-wrapper .SearchField:hover,
.tabbar-wrapper .SearchField:focus-within {
    background-color: var(--bg) !important;
    backdrop-filter: blur(8px) !important;
    -webkit-backdrop-filter: blur(8px) !important;
    border-radius: var(--radius) !important; /* keep corners consistent */
}

/* Ensure tab bar has proper stacking */
#tabs-tabbar-container {
    z-index: var(--z-base) !important;
    position: relative !important;
}

/* Force window controls to appear above tab bar */
.window-buttongroup {
    z-index: var(--z-overlay) !important;
}

/* Force settings button to appear above tab bar */
.vivaldi, .sidebar .button-toolbar.settings, .button-settings {
    z-index: var(--z-overlay) !important;
}

/* Ensure inner panel content respects sidebar radius */
#panels-container .panel-group,
#panels .webpanel-stack .webpanel .webpanel-content {
    border-radius: var(--radius) !important;
    overflow: hidden; 
}

/* INNER ROUND BORDERS */

#browser:not(.fullscreen) #webpage-stack {
    /*margin: 0 4px 4px 4px;*/ margin: 0 6px 7px 5px;
    border-radius: var(--radius);
    /*
    backdrop-filter: blur(12px);
    -webkit-backdrop-filter: blur(12px);
    background-color: var(--bg);
    */                                      /*Use this for blurred webpage background*/
    box-shadow: inset 0px 0px 4px 4px rgba(0, 0, 0, 0.20);
                                            /*Use this for shadow on the webpage*/
}

/* Fixed webpage margin issue with New Auto Hide UI */
.auto-hide
#browser:not(.fullscreen) #webpage-stack {
    margin: 0 0px 0px 0px;
    border-radius: 0px;
}

/* Remove all background images */

/*
#main, 
.startpage,
.startpage-content,
.webpage,
#browser {
    background-image: none !important;
    background-color: transparent !important;
}
*/

/* BETTER Transparency for TAB TILES MODE */

#browser .tile:has(> .tiled.webpageview) {
    border: var(--mosaicPadding) solid transparent; /* FIXING TAB TILES PART 1 */
}

#browser:not(.inner, .narrow-tiling) #webpage-stack > .tiled.visible {
    box-shadow: inset 0 0 0 var(--n6) transparent; /* FIXING TAB TILES PART 2 */
}

.tiled.webpageview:not(.active) {
    box-shadow: none; /* FIXING TAB TILES PART 3 */
}

#browser:not(.inner, .narrow-tiling) #webpage-stack > .tiled.visible {
    padding: 0; /* FIXING TAB TILES PART 4 */
}

.hasfocus .webpageview.tiled.active {
    box-shadow: 0 0 0 2px var(--colorHighlightBg); /* CHANGING COLOR OF BORDER OF ACTIVE WHEN BROWSER IS FOCUSED */
}

.isblurred .webpageview.tiled.active {
    box-shadow: 0 0 0 2px var(--colorHighlightBg); /* CHANGING COLOR OF BORDER OF ACTIVE WHEN BROWSER ISNT FOCUSED */
}

/* Hide header completely */
/*
#header {
display: none !important;
}
*/

/* Resize the window button group */

.window-buttongroup {
    height: 26px !important;
 }  /* Total height */   


.window-buttongroup button {
    width: 32px !important;    /* Each Button Width */
    height: 26px !important;   /* Each Button Height */
    padding: 0 !important;
    /*margin: 0 2px !important;*/  /* Gap between buttons */
}


/* ZEN HEADER - HIDE HEADER UNTIL HOVER */

#header { 
    min-height: 8px !important;
    opacity: 0;
    overflow: hidden;
    transition: height var(--animation-speed, 260ms) ease, opacity var(--animation-speed, 260ms) ease;
    z-index: var(--z-overlay);
    pointer-events: none;
    margin: 0px !important;

}

#header:hover {
  height: 26px !important;
  opacity: 1;
  pointer-events: none !important;
}

/* Hide Vivaldi button menu completely */

/*
button.vivaldi {
    display: none !important;
}
*/

/* Search field dropdown for Light Theme */
/*
.SearchField .menu,
.OmniDropdown {
  background-color: rgba(255, 255, 255, 0.60) !important;
  backdrop-filter: blur(24px) !important;
}
*/

/* Search field dropdown for Dark Theme */
/*
.SearchField .menu,
.OmniDropdown {
  background-color: rgba(0, 0, 0, 0.60) !important;
  backdrop-filter: blur(24px) !important;
}
*/

/* Tabs Button at Tab Bar */

.TabButtonPopup,
.button-popup {
    background: transparent !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border: none;
}
.TabButtonPopup .vivaldi-tree .VivaldiList .tree-item .tree-row {
    background-color: transparent !important;
}

/* Clock Popup Blur */

.ClockPopup-Header,
.ClockPopup-Alarms,
.ClockPopup-Countdowns,
.ClockPopup .toolbar,
.ClockPopup-Active {
    background: transparent !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border: none;
}

/* Blur on Privacy Statics */
#modal-bg .modal-wrapper,
#modal-bg.Privacy-Stats-Modal .TabbedView-List,
.dialog-preview,
.dialog-footer {
    background: transparent !important;
    backdrop-filter: blur(12px) !important;
    border: none !important;
}

/* Blur on Privacy Dashboard */
#modal-bg.PrivacyDash .modal-wrapper,
.PrivacyDash-Title,
.PrivacyDash .dialog-content,
.PrivacyDash-SectionContent,
.PrivacyDash-Section--Commitment,
.PrivacyDash-Section--Commitment .PrivacyDash-SectionTitle,
.PrivacyDash-SectionContent,
.PrivacyDash .dialog-header,
.PrivacyDash-Stats-Board .TabbedView-List,
.PrivacyDash-Stats-Board .TabbedView-Content,
.sortselector:not(.sortselector-compact),
.PrivacyDash-Section--Commitment .PrivacyDash-SectionContent,
.PrivacyDash-User-Top,
.PrivacyDash-StatusBlock--Fact {
    background: transparent !important;
    backdrop-filter: blur(12px) !important;
    border: none !important;
}

/* Blur on new vivaldi:about page*/
.header-section,
.card.system-build-card,
.card.update-info-card,
.card.helpful-links-card,
.footer-credits {
    background-color: transparent !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
    border: none !important;
}

/* Blur on Auto Hide Tite Bar & Windows Button Group */
.auto-hide-wrapper.top {
    background-color: var(--bg) !important;
    backdrop-filter: blur(12px) !important;
    -webkit-backdrop-filter: blur(12px) !important;
}

/* Resize the window button group when Auto-hide UI enabled */
.auto-hide
.window-buttongroup {
    height: 31px !important;
}

.auto-hide
.window-buttongroup button {
    width: 32px !important;
    height: 31px !important;
    padding: 0 !important;
}
